'use strict';(function(){var b=function(){this.init()};b.prototype.init=function(){this.addEvents();this.loadTasks()};b.prototype.loadTasks=function(){if(null===localStorage.getItem("todoList"))return!1;for(var a=JSON.parse(localStorage.getItem("todoList")),d=a.length,c=0;c<d;c++)this.appendToList(a[c].value,a[c].checked)};b.prototype.saveTasks=function(){for(var a=document.querySelectorAll(".todo__task"),d=document.querySelectorAll(".task__content"),c=[],b=0,f=a.length;b<f;b++)a[b].classList.contains("todo__task_completed")?
c.push({value:d[b].textContent,checked:!0}):c.push({value:d[b].textContent,checked:!1});localStorage.setItem("todoList",JSON.stringify(c))};b.prototype.isChecked=function(a){if(!1!==a)return"checked"};b.prototype.createTask=function(a,b){var c=document.createElement("li");c.classList.add("todo__task");b&&c.classList.add("todo__task_completed");c.classList.add("task");c.innerHTML='<label class="task__done checkbox"><input type="checkbox" class="checkbox__done visuallyhidden" '+
this.isChecked(b)+'><span class="checkbox__checkbox"></span><span class="visuallyhidden">Zadanie sko\u0144czone</span></label><div class="task__content" contenteditable="false" tabindex="0">'+a+'</div><button class="task__remove remove" aria-label="Usu\u0144 zadanie"><span class="remove__span visuallyhidden">Usu\u0144 zadanie</span></button>';
return c};b.prototype.isValid=function(a){return!/<|>/g.test(a)&&0<a.trim().length?!0:!1};b.prototype.clearInput=function(a){a.target.value=""};b.prototype.appendToList=function(a,b){if(!this.isValid(a))return!1;var c=document.querySelector(".todo__list"),e=this.createTask(a,b);c.appendChild(e)};b.prototype.keyHandler=function(a){var b=a.target;if(13!==a.keyCode||!b.classList.contains("todo__input"))return!1;this.appendToList(b.value,!1);this.clearInput(a);this.saveTasks()};b.prototype.removeTasks=
function(a){a=a.target;if(a.classList.contains("task__remove"))a.parentNode.parentNode.removeChild(a.parentNode);else if(a.classList.contains("remove__span"))a.parentNode.parentNode.parentNode.removeChild(a.parentNode.parentNode);else return!1;this.saveTasks()};b.prototype.completTasks=function(a){a=a.target;if(a.classList.contains("checkbox__done")){var b=a.parentNode.parentNode;a.checked?b.classList.add("todo__task_completed"):b.classList.remove("todo__task_completed")}else return!1;this.saveTasks()};
b.prototype.editTasks=function(a){a=a.target;if(a.classList.contains("task__content"))"true"===a.contentEditable?(a.contentEditable="false",this.saveTasks()):a.contentEditable="true";else return!1};b.prototype.clearCompletedTasks=function(a){if(!a.target.classList.contains("buttons__button_clear-completed"))return!1;a=document.querySelectorAll(".todo__task_completed");var b=a.length;if(1>b)return!1;for(var c=0;c<b;c++)a[c].parentNode.removeChild(a[c]);this.saveTasks()};b.prototype.printTasks=function(a){if(!a.target.classList.contains("buttons__button_print-tasks"))return!1;
window.print()};b.prototype.addEvents=function(){document.addEventListener("keydown",this.keyHandler.bind(this));document.addEventListener("click",this.removeTasks.bind(this));document.addEventListener("change",this.completTasks.bind(this));document.addEventListener("dblclick",this.editTasks.bind(this));document.addEventListener("click",this.clearCompletedTasks.bind(this));document.addEventListener("click",this.printTasks.bind(this))};new b})();
